<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="description" content="description goes here" />
    <meta name="keywords" content="keywords,goes,here" />
    <meta name="author" content="Your Name" />

    <link href="../styles/impact/css/site.css" rel="stylesheet" type="text/css" />
    
    <title>Launching Remote Processes</title>



</script>
</head>
<body>
  
  <div id="navigation">
  	<div class="wrapper">
      <ul><li class="webgen-menu-level1"><a href="../index.html">MeshKeeper</a></li><li class="webgen-menu-level1"><a href="../source.html">Source</a></li><li class="webgen-menu-level1"><a href="../community.html">Community</a></li><li class="webgen-menu-level1"><a href="../support.html">Support</a></li><li class="webgen-menu-level1"><a href="../maven/1.0-SNAPSHOT/meshkeeper-api/apidocs/index.html">Javadoc</a></li><li class="webgen-menu-level1 webgen-menu-submenu"><a href="../blog/index.html">Blog</a></li><li class="webgen-menu-level1 webgen-menu-submenu webgen-menu-submenu-inhierarchy"><a href="index.html">Documentation</a></li><li class="webgen-menu-level1 webgen-menu-submenu"><a href="../downloads/index.html">Downloads</a></li></ul>
  	</div>
  </div>
  

  <div id="overview">
    <div class="wrapper">
      
      <div class="logo">
        <img src="../images/meshkeeper-logo.png"/>
      </div>
      
      <div class="message">
        <h1>Launching Remote Processes</h1>

      </div>
    </div>
  </div>





  <div id='content'>
  	<div class='wrapper'>
      <h1 id='selecting_the_agent'>Selecting the Agent</h1>

<p>A MeshKeeper control server can have many launched agents attached to it. To launch a remote process you must first pick agent to launch on. Once you have <a href='embedded-development.html'>created a <code>MeshKeeper</code> object</a>, you can use the following code fragment to a list of all available agents.</p>
<div class="CodeRay">
  <div class="code"><pre>
HostProperties hosts<span style="color:#339;font-weight:bold">[]</span> = meshKeeper.launcher().getAvailableAgents()
<span style="color:#349;font-weight:bold">String</span> agentId = hosts[<span style="color:#00D;font-weight:bold">0</span>].getAgentId();
</pre></div>
</div>

<p>The <a href='http://meshkeeper.fusesource.org/maven/1.0-SNAPSHOT/meshkeeper-api/apidocs/org/fusesource/meshkeeper/LaunchDescription.html'><code>HostProperties</code></a> lets you know details about the host the agent is running on like the CPU count, host name, and system properties of the agent. Each agent has a unique agent id, which will be how you identify which agent you want to launch processes on.</p>

<h1 id='creating_the_launch_description'>Creating the Launch Description</h1>

<p>The next step will be to create a <a href='http://meshkeeper.fusesource.org/maven/1.0-SNAPSHOT/meshkeeper-api/apidocs/org/fusesource/meshkeeper/LaunchDescription.html'><code>LaunchDescription</code></a> which is a command line builder for the process that you want to remotely execute. Command line arguments can be strings or expressions. Expressions get evaluated on the launch agent. The following listing shows how a <a href='http://meshkeeper.fusesource.org/maven/1.0-SNAPSHOT/meshkeeper-api/apidocs/org/fusesource/meshkeeper/LaunchDescription.html'><code>LaunchDescription</code></a> is initialized.</p>
<div class="CodeRay">
  <div class="code"><pre>
LaunchDescription ld = <span style="color:#080;font-weight:bold">new</span> LaunchDescription();
ld.add(<span style="background-color:#fff0f0;color:#D20"><span style="color:#710">&quot;</span><span style="">echo</span><span style="color:#710">&quot;</span></span>);
ld.add(<span style="background-color:#fff0f0;color:#D20"><span style="color:#710">&quot;</span><span style="">hello</span><span style="color:#710">&quot;</span></span>);
ld.add(file(<span style="background-color:#fff0f0;color:#D20"><span style="color:#710">&quot;</span><span style="">path/to/a/file</span><span style="color:#710">&quot;</span></span>));
</pre></div>
</div>

<p>In the example above, the <a href='http://meshkeeper.fusesource.org/maven/1.0-SNAPSHOT/meshkeeper-api/apidocs/org/fusesource/meshkeeper/Expression.html#file(java.lang.String)'><code>file()</code></a> method creates an expression which will convert the file separators of the given path to use the conventions of the agents platform. So if the agent was running on Windows, the executed command would be:</p>
<div class="CodeRay">
  <div class="code"><pre>
echo hello path\to\a\file
</pre></div>
</div>

<p>We recommend you use a static import of <code>Expression.*</code> when building <code>LaunchDescription</code> objects. There are many other <a href='http://meshkeeper.fusesource.org/maven/1.0-SNAPSHOT/meshkeeper-api/apidocs/org/fusesource/meshkeeper/Expression.html#method_summary'>handy expressions</a> that can be used.</p>

<h1 id='launching_the_process'>Launching the Process</h1>

<p>Once you have a <code>LaunchDescription</code> built, you are ready ask an agent to launch it.</p>
<div class="CodeRay">
  <div class="code"><pre>
MeshProcessListener listener = <span style="color:#080;font-weight:bold">null</span>;
MeshProcess process = meshKeeper.launcher().launchProcess(agentId, ld, listener);
</pre></div>
</div>

<p>In the example above, we launch a the process with a null <a href='http://meshkeeper.fusesource.org/maven/1.0-SNAPSHOT/meshkeeper-api/apidocs/org/fusesource/meshkeeper/MeshProcessListener.html'><code>MeshProcessListener</code></a>, which means we will not be given sent process output. If you wanted to capture process stdout, stderr, or be notifed of the process exist code, you should implement the listener. If you just want to log process output to your console window you can use the <a href='http://meshkeeper.fusesource.org/maven/1.0-SNAPSHOT/meshkeeper-api/apidocs/org/fusesource/meshkeeper/util/DefaultProcessListener.html'><code>DefaultProcessListener</code></a> implementation.</p>

<p>The returned <a href='http://meshkeeper.fusesource.org/maven/1.0-SNAPSHOT/meshkeeper-api/apidocs/org/fusesource/meshkeeper/MeshProcess.html'><code>MeshProcess</code></a> object can be used to write data to the process stdin, check to see if it&#8217;s still running or to kill the running process.</p>

  	</div>
  </div>




</body>
</html>